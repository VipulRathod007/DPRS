{% extends 'Main/base.html' %}
{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/user.css'%}">
<link rel="stylesheet" href="{% static 'fonts/font-awesome/css/font-awesome.min.css'%}">


<link href="https://fonts.googleapis.com/css2?family=Open+Sans
:wght@300;400;600;700&display=swap" rel="stylesheet">

<!--bootstrap.css file-->
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}">

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
    integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
    integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
    crossorigin="anonymous"></script>



<style>
    .font-mod {
        font-size: 12.5pt;
    }


    .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        width: 60%;
        border-radius: 10px;
        margin: auto;
        margin-top: 25px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    img {
        margin-top: 10px;
        margin-right: 10px;
        border-radius: 10px;
        width: 200px;
        height: 200px;
    }

    .container {
        margin: auto;
    }
</style>
{% endblock style %}

{% block body %}

<div class="slide-item overlay"
    style="background-image: url('{% static 'images/reg_banner.jpg' %}'); background-size: cover; background-position: center">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 align-self-center text-center mx-auto">
                <h1 class="heading mb-5">Welcome {{admission.patientname}}</h1>

                <div class="btn-group">
                    <!-- {% if currHistoryFlag %}
                    <div class="container">
                        <a href="#down" class="btn btn-primary active" aria-current="page">
                            <h6>Current History</h6>
                        </a>
                    </div>
                    {% endif %} -->
                    <div class="container">
                        <a href="#down" class="btn btn-primary active" aria-current="page">
                            <h6>Current History</h6>
                        </a>
                    </div>
                    <div class="container">
                        <a href="#bills" class="btn btn-primary" aria-current="page">
                            <h6>Bills</h6>
                        </a>
                    </div>
                    <div class="container">
                        <a href="/user/usersPastHistoryInHospital/{{admission.patientid}}" class="btn btn-primary">
                            <h6>Past History</h6>
                        </a>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>




<div class="card mt-4 pt-4" style="margin-bottom: 20px;" id="down">
    <div class="container mt-4 pt-4">
        <h1 style="text-align: center; margin: auto; ">Details Of Patient</h1>
        <hr>
    </div>

    <div class="container">

        <h2 style="text-align: center;"> Patient's Admit Panel </h2>

        <table class="table table-striped table-hover">
            <div class="container">
                <tr>
                    <td class="table">
                        <h5><b>Patient's Name</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.patientname}} </div>
                    </td>
                </tr>



                <tr>
                    <td class="table">
                        <h5><b>Patient's ID</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.patientid}} </div>
                    </td>
                </tr>


                <tr>
                    <td class="table">
                        <h5><b>Patient's Hospital Name</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.hospitalname}} </div>
                    </td>
                </tr>


                <tr>
                    <td class="table">
                        <h5><b>Hospital's ID</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.hospitalid}} </div>
                    </td>
                </tr>


                <tr>
                    <td class="table">
                        <h5><b>Patient's Admit Date</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.admitDate}} </div>
                    </td>
                </tr>


                <tr>
                    <td class="table">
                        <h5><b>Reason behind Admission</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.cause}} </div>
                    </td>
                </tr>

                <tr>
                    <td class="table">
                        <h5><b>Patient's Reports</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> <a href="../{{admission.report}}" target="_blank"> <img
                                    src="../{{admission.report}}"> </a> </div>
                    </td>
                </tr>

                <tr>
                    <td class="table">
                        <h5><b>Patient's Current Prescription</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.prescription}} </div>
                    </td>
                </tr>


        </table>
    </div>


    {% if admission.dischargeDate %}

    <div class="container">
        <hr>
        <h2 style="text-align: center;"> Patient's Discharge Panel </h2>
        <table class="table table-striped table-hover">
            <div class="container">

                <tr>
                    <td class="table">
                        <h5><b>Patient's Discharge Date</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.dischargeDate}} </div>
                    </td>
                </tr>

                <tr>
                    <td class="table">
                        <h5><b>Patient's Total Bill</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> {{admission.billamt}} </div>
                    </td>
                </tr>

                <tr>
                    <td class="table">
                        <h5><b>Patient's Bill Picture</b></h5>
                    </td>
                    <td>
                        <div class="control-label"> <a href="../{{admission.bill}}" target="_blank"> <img
                                    src="../{{admission.bill}}"> </a> </div>
                    </td>
                </tr>

            </div>

        </table>
    </div>

    {% else %}

    <div class="container">
        <hr>
        <h2 style="text-align: center;"> Patient's Discharge Panel </h2>

        <table class="table table-striped table-hover">
            <div class="container">

                <tr>
                    <td class="table">
                        <h5 style="text-align: center;"><b>Still in Admitted!</b></h5>
                    </td>
                </tr>
            </div>
        </table>
    </div>

    {% endif %}
</div>
<div class="mt-2" id="bills">
    <br>
</div>
<div class="user-form mt-4 pt-4">
    <h2>Bills added of {{admission.patientname}}</h2>
</div>
<div class="container mt-2">
    {% if bills %}
    <label class=" control-label" for="healthid">Patient's Bills</label>
    <ul class="list-group" style="width: 100%;" id="healthid">
        {% for bill in bills %}
        <tr>
            <div class="row">
                <td class="">
                    <li class="list-group-item" style="width: 90%;">{{bill.billDesc}} with Bill Amount of
                        {{bill.billamt}} Rs. added on
                        {{bill.timeofBillAddition}}</li>
                </td>
                <td>
                    <button type="button"
                        style="border-radius: 5%; padding: 5px; background-color: #3c90f7; color: white;" class="btn"
                        onclick="document.getElementById('{{bill.id}}').hidden = false;">Show</button>
                </td>
            </div>
        </tr>
        <div class="container" hidden id="{{bill.id}}" style="">
            <div class="row mt-4">
                <div class="col-md-6  col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Bill Amount<span class="required"> *</span></label>
                        <input type="text" class="form-control" value="{{bill.billamt}}" name="billamt" id="billamt"
                            readonly required>
                    </div>
                </div>

                <div class="col-md-6  col-sm-6 col-xs-12">
                    <div class="form-group">
                        <div class="upload-pic">
                            <label class="control-label mb-3 pb-3" for="InputEmail1">Uploaded Patient's
                                Bill</label>
                            <div class="mypic text-center mt-4">
                                <a href="../{{bill.billImg}}" target="_blank">
                                    <img class="img-fluid"
                                        style="margin-top: 25px; margin-right: 10px; height: 150px; width: 200px;"
                                        src="../{{bill.billImg}}"></a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-6  col-sm-6 col-xs-12">
                    <div class="form-group">
                        <label class="control-label">Pending Bill Amount<span class="required"> *</span></label>
                        <input type="text" class="form-control" value="{{bill.pendingbillamt}}" name="billamt"
                            id="billamt" readonly required>
                    </div>
                </div>
            </div>

            <button type="button" onclick="document.getElementById('{{bill.id}}').hidden = true;"
                style="margin-left: -35px;" class="btn btn-primary text-uppercase text-center">Close</button>
            <div class="container">
                <div class="row ">
                    <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                    </div>
                </div>
            </div>
            <hr>
        </div>
        {% endfor %}
    </ul>
    <br>
    {% else %}
    <p><span style="background-color: black; color: white;" class="px-2">Currently No Bills are added!</span></p>
    {% endif %}
</div>

{% endblock %}